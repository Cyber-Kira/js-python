<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <title>Document</title>
</head>

<body>
    <header class="header">
        <nav class="header_nav">
            <ul class="header_nav_list">
                <li class="header_nav_list_item"><a class="header_nav_list_item_link" href="#">Уроки</a></li>
                <li class="header_nav_list_item"><a class="header_nav_list_item_link" href="#">Практические</a></li>
                <li class="header_nav_list_item"><a class="header_nav_list_item_link" href="#">Лабораторные</a></li>
                <li class="header_nav_list_item"><a class="header_nav_list_item_link" href="#">Тест</a></li>
            </ul>
        </nav>
    </header>

    <div class="wrapper">
        <div class="sidebar">
            <ul>
                <li><a href="#">Уроки</a></li>
                <li><a href="#">Практические</a></li>
                <li><a href="#">Лабораторные</a></li>
                <li><a href="#">Тест</a></li>
            </ul>
        </div>
        <div class="main_content">
            <h1>With ... as - менеджеры контекста</h1>
            <p>Конструкция with ... as используется для оборачивания выполнения блока инструкций менеджером контекста.
                Иногда это более удобная конструкция, чем <a href="#">try...except...finally</a>.</p>
            <p>Синтаксис конструкции with ... as:</p>
<pre>
<code>
"with" expression ["as" target] ("," expression ["as" target])* ":"
suite
</code>
</pre>
            <p>Теперь по порядку о том, что происходит при выполнении данного блока:</p>
            <ol>
                <li>
                    <p>Выполняется выражение в конструкции with ... as.</p>
                </li>
                <li>
                    <p>Загружается специальный метод __exit__ для дальнейшего использования.</p>
                </li>
                <li>
                    <p>Выполняется метод __enter__. Если конструкция with включает в себя слово as, то возвращаемое
                        методом __enter__ значение записывается в переменную.</p>
                </li>
                <li>
                    <p>Выполняется suite.</p>
                </li>
                <li>
                    <p>Вызывается метод __exit__, причём неважно, выполнилось ли suite или произошло исключение. В этот
                        метод передаются параметры исключения, если оно произошло, или во всех аргументах значение None,
                        если исключения не было.</p>
                </li>
            </ol>
            <p>Если в конструкции with - as было несколько выражений, то это эквивалентно нескольким вложенным
                конструкциям:</p>
<pre>
<code>
with A() as a, B() as b:
suite
</code>
</pre>
            <p>эквивалентно</p>
<pre>
<code>
with A() as a:
with B() as b:
suite
</code>
</pre>
            <p>Для чего применяется конструкция with ... as? Для гарантии того, что критические функции выполнятся в
                любом случае. Самый распространённый пример использования этой конструкции - открытие файлов. Я уже
                рассказывал об <a href="#">открытии файлов с помощью функции open</a>, однако конструкция with ... as,
                как правило, является более удобной и гарантирует закрытие файла в любом случае.</p>
            <p>Например:</p>
<pre>
<code>
with open('newfile.txt', 'w', encoding='utf-8') as g:
d = int(input())
print('1 / {} = {}'.format(d, 1 / d), file=g)
</code>
</pre>
            <p>И вы можете быть уверены, что файл будет закрыт вне зависимости от того, что введёт пользователь.</p>
        </div>
        <div class="info">
            <ul>
                <li><a href="#first">Скачать Python</a></li>
                <li><a href="#second">Установка Python на Windows</a></li>
            </ul>
        </div>
    </div>
</body>

</html>